function googleMapGenerator(c){var d={container:null,containerClass:"map",printClass:"map__print",legendClass:"map__legend",legend:null,print:null,mapLat:-33.85,mapLng:151.24,mapZoom:12,hasInfoWindow:true,hasLegend:true,hasPrint:true,locations:[],styles:[]};if(c){h(d,c)}var b=document.querySelectorAll(d.container)[0];function g(){var i={zoom:d.mapZoom,center:new google.maps.LatLng(d.mapLat,d.mapLng),mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}};var m=new google.maps.Map(b,i);if(d.hasLegend){var l=document.createElement("div");l.setAttribute("class",d.legendClass);b.appendChild(l);d.legend=e(b,d.legendClass);m.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(d.legend)}f(m,d.locations);var k=new google.maps.StyledMapType(d.styles,{name:"Styled Map"});m.mapTypes.set("map_style",k);m.setMapTypeId("map_style");if(d.hasPrint){var j=document.createElement("a");j.setAttribute("class",d.printClass);j.setAttribute("href","#");j.innerHTML="Print";b.appendChild(j);d.print=e(b,d.printClass);d.print.onclick=function(){a()}}return m}function f(j,q){if(d.hasInfoWindow){var l=null;l=new google.maps.InfoWindow({content:"",maxWidth:300})}for(var n=0,k=q.length;n<k;n++){var r=q[n],m=new google.maps.LatLng(r[2],r[3]),o=new google.maps.Marker({position:m,map:j,icon:"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+(n+1)+"|444444|FFFFFF",title:r[0],html:"<div><h1>"+r[0]+"</h1>"+r[1]+"</div>",zIndex:r[4]});if(d.hasLegend){var p=document.createElement("div");p.setAttribute("class","map__legend_item");p.innerHTML="<strong>"+(n+1)+"</strong>&nbsp; "+r[0];d.legend.appendChild(p)}if(d.hasInfoWindow){google.maps.event.addListener(o,"click",function(){l.setContent(this.html);l.open(j,this)})}}}function a(){var j=window.open("","mapWin","width=640,height=640"),n="",l="",o="",k=d.locations.length;if(d.styles[0].stylers[0].hue){n="%7Chue:0x"+d.styles[0].stylers[0].hue.substring(1,d.styles[0].stylers[0].hue.length)}if(d.styles[0].stylers[1].saturation){l="%7Csaturation:"+d.styles[0].stylers[1].saturation}for(var m=0;m<k;m++){o+="&amp;markers=label:"+(m+1)+"%7C"+d.locations[m][2]+","+d.locations[m][3]}j.focus();j.document.write("<style>body { margin:0 } img { width: 100%; height: auto; }</style>");j.document.write('<img style="-webkit-user-select: none" src="http://maps.googleapis.com/maps/api/staticmap?center='+d.mapLat+","+d.mapLng+"&amp;zoom="+d.mapZoom+"&amp;size=640x640&amp;style=stylers"+n+l+o+'">');j.document.write("<script>setTimeout(function () { window.focus(); window.print(); }, 1500);<\/script>");j.document.close();return}function h(s,r){var u,l,j,k,p,q,o=arguments[0]||{},n=1,m=arguments.length,t=false;if(typeof o==="boolean"){t=o;o=arguments[1]||{};n=2}if(typeof o!=="object"&&!jQuery.isFunction(o)){o={}}if(m===n){o=this;--n}for(;n<m;n++){if((u=arguments[n])!=null){for(l in u){j=o[l];k=u[l];if(o===k){continue}if(t&&k&&(jQuery.isPlainObject(k)||(p=jQuery.isArray(k)))){if(p){p=false;q=j&&jQuery.isArray(j)?j:[]}else{q=j&&jQuery.isPlainObject(j)?j:{}}o[l]=jQuery.extend(t,q,k)}else{if(k!==undefined){o[l]=k}}}}}return o}function e(r,q){var p;for(var o=0,k=r.childNodes.length;o<k;o++){var n=(r.childNodes[o].className!=undefined)?r.childNodes[o].className.split(" "):[];for(var l=0,m=n.length;l<m;l++){if(n[l]==q){p=r.childNodes[o]}}}return p}g();return{addGoogleMap:g,addGoogleMapMarkers:f,printGoogleMap:a,extend:h,getChildByClass:e}};