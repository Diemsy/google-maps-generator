/**
 *  Google Map Generator
 *
 *  Author: Clint Brown
 *  Website: https://github.com/clintioo/google-maps-generator
 *  Version: v0.0.6
 *  Last modified: Tuesday 11 November 2014 14:42
 *  Description: Javascript helper plugin for Google Maps Javscript API v3
 */
function googleMapGenerator(b){if(!(this instanceof googleMapGenerator)){return new googleMapGenerator(b)}var n=googleMapGenerator.options,f=document.querySelectorAll(n.mapStatic)[0]||document.querySelectorAll(n.container)[0],q,p;if(b){n=m(googleMapGenerator.options,b)}if(n.docWidth<n.breakpointDynamicMap&&n.hasStaticMap===true){a(n.docWidth,n.docWidth);k()}else{h()}function h(){p={zoom:n.mapZoom,center:new google.maps.LatLng(n.mapLat,n.mapLng),mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}};q=new google.maps.Map(f,p);if(n.hasLegend){d()}if(n.styles){g()}if(n.markerLoad==="load"){j()}if(n.hasPrint){l()}return q}function d(){var s=document.createElement("div");s.setAttribute("class",n.legendClass);f.appendChild(s);n.legend=c(f,n.legendClass);q.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(n.legend)}function g(){var s=new google.maps.StyledMapType(n.styles,{name:"Styled Map"});q.mapTypes.set("map_style",s);q.setMapTypeId("map_style")}function j(){if(n.hasStaticMap===false){var t=window.scrollY||document.documentElement.scrollTop,u=[];if(n.markersAdded){return false}if(n.markerLoad==="scroll"&&f.offsetTop>t){return false}if(n.hasInfoWindow){var v=null;v=new google.maps.InfoWindow({content:"",maxWidth:240})}for(var x=0,s=n.locations.length;x<s;x++){var A=n.locations[x],w=new google.maps.LatLng(A[3],A[4]),y;if(n.hasMarkerIcon){if(A[6]){n.markerIcon={url:A[6],scaledSize:new google.maps.Size(50,50)}}else{r(x);n.markerIcon="http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+n.markerIconLabel+"|"+n.markerIconHexBackground+"|"+n.markerIconHexColor}}y=new google.maps.Marker({position:w,map:q,icon:n.markerIcon,animation:n.markerAnimation,title:A[0],html:'<div><span class="map__title">'+A[0]+'</span><span class="map__address">'+A[1]+'</span><span class="map__description">'+A[2]+"</span></div>",zIndex:A[5]});u.push(y);if(n.hasLegend){var z=document.createElement("div");z.setAttribute("class","map__legend__item");z.innerHTML="<strong>"+n.markerIconLabel+'</strong>&nbsp;&nbsp;<a href="#">'+A[0]+"</a>";n.legend.appendChild(z)}if(n.hasInfoWindow){google.maps.event.addListener(y,"click",function(){v.setContent(this.html);v.open(q,this)})}}if(n.hasLegend){$("."+n.legendClass).on("click","a",function(C){C.preventDefault();var B=$(C.target).parent().index();google.maps.event.trigger(u[B],"click")})}n.markersAdded=true}}function l(){var s=document.createElement("a");s.setAttribute("class",n.printClass);s.setAttribute("href","#");s.innerHTML="Print";f.appendChild(s);n.print=c(f,n.printClass);n.print.onclick=function(){e();return false}}function a(t,s){return f.innerHTML=o(t,s)}function o(t,z){var y="",u="",x="",v="",s="",A=n.locations.length,t=t||640,z=z||640;if(n.key){y="&amp;key="+n.key}if(n.styles[0].stylers[0].hue){u="%7Chue:0x"+n.styles[0].stylers[0].hue.substring(1,n.styles[0].stylers[0].hue.length)}if(n.styles[0].stylers[1].saturation){v="%7Csaturation:"+n.styles[0].stylers[1].saturation}x+='<div class="map__legend"><ul>';for(var w=0;w<A;w++){s+="&amp;markers=label:"+r(w)+"%7C"+n.locations[w][3]+","+n.locations[w][4];x+='<li><span class="map__marker">'+r(w)+"</span> <strong>"+n.locations[w][0]+"</strong><br>"+n.locations[w][1]+"</li>"}x+="</ul></div>";return'<div class="map__static"><img style="-webkit-user-select: none" src="http://maps.googleapis.com/maps/api/staticmap?center='+n.mapLat+","+n.mapLng+"&amp;zoom="+n.mapZoom+y+"&amp;size="+t+"x"+z+"&amp;style=stylers"+u+v+s+'"></div>'+x}function k(){var s=document.querySelectorAll(n.mapStatic)[0];s.onclick=function(t){if(!document.querySelectorAll(n.mapDynamic)[0]){s.style.height=s.offsetHeight*2.5+"px";i();return false}}}function i(){var s=document.createElement("script");googleMapGenerator.options.hasStaticMap=false;googleMapGenerator.options.markerLoad="load";s.type="text/javascript";s.src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=googleMapGenerator";return document.body.appendChild(s)}function r(s){switch(n.markerIconType){case"alpha":n.markerIconLabel=String.fromCharCode(97+s).toUpperCase();break;case"numeric":n.markerIconLabel=s+1;break}return n.markerIconLabel}function e(){var s=window.open("","mapWin","width=640,height=640");s.focus();s.document.write("<style>body { margin:0 } img { width: 100%; height: auto; } .map__legend ul { padding: 0; margin: 1.5em 0 0; } .map__legend ul li { float: left; width: 50%; list-style: none; margin: 0 0 1em; font: 12px sans-serif; }</style>"+o()+"<script>setTimeout(function () { window.focus(); window.print(); }, 1500);<\/script>");s.document.close();return s}function m(B,A){var D,u,s,t,y,z,x=arguments[0]||{},w=1,v=arguments.length,C=false;if(typeof x==="boolean"){C=x;x=arguments[1]||{};w=2}if(typeof x!=="object"&&!jQuery.isFunction(x)){x={}}if(v===w){x=this;--w}for(;w<v;w++){if((D=arguments[w])!=null){for(u in D){s=x[u];t=D[u];if(x===t){continue}if(C&&t&&(jQuery.isPlainObject(t)||(y=jQuery.isArray(t)))){if(y){y=false;z=s&&jQuery.isArray(s)?s:[]}else{z=s&&jQuery.isPlainObject(s)?s:{}}x[u]=jQuery.extend(C,z,t)}else{if(t!==undefined){x[u]=t}}}}}return x}function c(z,y){var x;for(var w=0,s=z.childNodes.length;w<s;w++){var v=(z.childNodes[w].className!=undefined)?z.childNodes[w].className.split(" "):[];for(var t=0,u=v.length;t<u;t++){if(v[t]==y){x=z.childNodes[w]}}}return x}return{addGoogleMapDynamic:h,addGoogleMapLegend:d,addGoogleMapStyle:g,addGoogleMapMarkers:j,addGoogleMapPrintBtn:l,addGoogleMapStatic:a,generateGoogleMapStatic:o,generateGoogleMapDynamic:k,loadGoogleMapJs:i,getGoogleMapMarkerLabel:r,printGoogleMap:e,extend:m,getChildByClass:c}}googleMapGenerator.options={container:".map",mapStatic:".map__static",mapDynamic:".gm-style",printClass:"map__print",legendClass:"map__legend",apiKey:null,legend:null,print:null,mapLat:-33.85,mapLng:151.24,mapZoom:12,hasStaticMap:false,hasInfoWindow:true,hasLegend:true,hasPrint:true,hasMarkerIcon:true,markerAnimation:null,markerLoad:"load",markerIconType:"alpha",markerIconLabel:"",markerIconHexColor:"ffffff",markerIconHexBackground:"444444",markerIcon:null,markersAdded:false,locations:[],styles:[],docWidth:document.body.clientWidth,breakpointDynamicMap:768};