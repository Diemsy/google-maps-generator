function googleMapGenerator(m){var i={container:null,containerClass:"map",printClass:"map__print",legendClass:"map__legend",apiKey:null,legend:null,print:null,mapLat:-33.85,mapLng:151.24,mapZoom:12,hasInfoWindow:true,hasLegend:true,hasPrint:true,hasMarkerIcon:true,markerAnimation:null,markerLoad:"load",markerIconType:"alpha",markerIconLabel:"",markerIconHexColor:"ffffff",markerIconHexBackground:"444444",markerIcon:null,markersAdded:false,locations:[],styles:[]};if(m){k(i,m)}var f=document.querySelectorAll(i.container)[0];var h={zoom:i.mapZoom,center:new google.maps.LatLng(i.mapLat,i.mapLng),mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}};var e=new google.maps.Map(f,h);if(i.hasLegend){d()}if(i.styles){b()}if(i.hasPrint){l()}if(i.markerLoad==="load"){g()}function d(){var n=document.createElement("div");n.setAttribute("class",i.legendClass);f.appendChild(n);i.legend=a(f,i.legendClass);e.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(i.legend)}function b(){var n=new google.maps.StyledMapType(i.styles,{name:"Styled Map"});e.mapTypes.set("map_style",n);e.setMapTypeId("map_style")}function l(){var n=document.createElement("a");n.setAttribute("class",i.printClass);n.setAttribute("href","#");n.innerHTML="Print";f.appendChild(n);i.print=a(f,i.printClass);i.print.onclick=function(){c();return false}}function g(){var t=window.scrollY||document.documentElement.scrollTop;if(i.markersAdded){return false}if(i.markerLoad==="scroll"&&f.offsetTop>t){return false}if(i.hasInfoWindow){var s=null;s=new google.maps.InfoWindow({content:"",maxWidth:300})}for(var q=0,r=i.locations.length;q<r;q++){var p=i.locations[q],u=new google.maps.LatLng(p[2],p[3]),o;if(i.hasMarkerIcon){j(q);i.markerIcon="http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+i.markerIconLabel+"|"+i.markerIconHexBackground+"|"+i.markerIconHexColor}o=new google.maps.Marker({position:u,map:e,icon:i.markerIcon,animation:i.markerAnimation,title:p[0],html:"<div><h1>"+p[0]+"</h1>"+p[1]+"</div>",zIndex:p[4]});if(i.hasLegend){var n=document.createElement("div");n.setAttribute("class","map__legend__item");n.innerHTML="<strong>"+i.markerIconLabel+"</strong>&nbsp; "+p[0];i.legend.appendChild(n)}if(i.hasInfoWindow){google.maps.event.addListener(o,"click",function(){s.setContent(this.html);s.open(e,this)})}}i.markersAdded=true}function j(n){switch(i.markerIconType){case"alpha":i.markerIconLabel=String.fromCharCode(97+n).toUpperCase();break;case"numeric":i.markerIconLabel=n+1;break}return i.markerIconLabel}function c(){var n=window.open("","mapWin","width=640,height=640"),r="",s="",p="",t="",o=i.locations.length;if(i.key){r="&amp;key="+i.key}if(i.styles[0].stylers[0].hue){s="%7Chue:0x"+i.styles[0].stylers[0].hue.substring(1,i.styles[0].stylers[0].hue.length)}if(i.styles[0].stylers[1].saturation){p="%7Csaturation:"+i.styles[0].stylers[1].saturation}for(var q=0;q<o;q++){t+="&amp;markers=label:"+j(q)+"%7C"+i.locations[q][2]+","+i.locations[q][3]}n.focus();n.document.write('<style>body { margin:0 } img { width: 100%; height: auto; }</style><img style="-webkit-user-select: none" src="http://maps.googleapis.com/maps/api/staticmap?center='+i.mapLat+","+i.mapLng+"&amp;zoom="+i.mapZoom+r+"&amp;size=640x640&amp;style=stylers"+s+p+t+'"><script>setTimeout(function () { window.focus(); window.print(); }, 1500);<\/script>');n.document.close();return}function k(w,v){var y,p,n,o,t,u,s=arguments[0]||{},r=1,q=arguments.length,x=false;if(typeof s==="boolean"){x=s;s=arguments[1]||{};r=2}if(typeof s!=="object"&&!jQuery.isFunction(s)){s={}}if(q===r){s=this;--r}for(;r<q;r++){if((y=arguments[r])!=null){for(p in y){n=s[p];o=y[p];if(s===o){continue}if(x&&o&&(jQuery.isPlainObject(o)||(t=jQuery.isArray(o)))){if(t){t=false;u=n&&jQuery.isArray(n)?n:[]}else{u=n&&jQuery.isPlainObject(n)?n:{}}s[p]=jQuery.extend(x,u,o)}else{if(o!==undefined){s[p]=o}}}}}return s}function a(u,t){var s;for(var r=0,n=u.childNodes.length;r<n;r++){var q=(u.childNodes[r].className!=undefined)?u.childNodes[r].className.split(" "):[];for(var o=0,p=q.length;o<p;o++){if(q[o]==t){s=u.childNodes[r]}}}return s}return{addGoogleMapLegend:d,addGoogleMapStyle:b,addGoogleMapPrint:l,addGoogleMapMarkers:g,getGoogleMapMarkerLabel:j,printGoogleMap:c,extend:k,getChildByClass:a}};