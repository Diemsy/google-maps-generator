/**
 *  Google Map Generator
 *
 *  Author: Clint Brown
 *  Website: https://github.com/clintioo/google-maps-generator
 *  Version: v0.0.4
 *  Last modified: Friday, 19 September 2014 10:29
 *  Description: Javascript helper plugin for Google Maps Javscript API v3
 */
 function googleMapGenerator(p){var i={container:null,containerClass:"map",printClass:"map__print",legendClass:"map__legend",apiKey:null,legend:null,print:null,mapLat:-33.85,mapLng:151.24,mapZoom:12,hasStaticMap:false,hasInfoWindow:true,hasLegend:true,hasPrint:true,hasMarkerIcon:true,markerAnimation:null,markerLoad:"load",markerIconType:"alpha",markerIconLabel:"",markerIconHexColor:"ffffff",markerIconHexBackground:"444444",markerIcon:null,markersAdded:false,locations:[],styles:[],docWidth:document.body.clientWidth};if(p){o(i,p)}var f=document.querySelectorAll(i.container)[0],e,h;if(i.docWidth<768&&i.hasStaticMap===true){n(i.docWidth,i.docWidth)}else{l()}function l(){h={zoom:i.mapZoom,center:new google.maps.LatLng(i.mapLat,i.mapLng),mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}};e=new google.maps.Map(f,h);if(i.hasLegend){d()}if(i.styles){b()}if(i.markerLoad==="load"){g()}if(i.hasPrint){k()}return e}function d(){var q=document.createElement("div");q.setAttribute("class",i.legendClass);f.appendChild(q);i.legend=a(f,i.legendClass);e.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(i.legend)}function b(){var q=new google.maps.StyledMapType(i.styles,{name:"Styled Map"});e.mapTypes.set("map_style",q);e.setMapTypeId("map_style")}function g(){if(i.hasStaticMap===false){var r=window.scrollY||document.documentElement.scrollTop,s=[];if(i.markersAdded){return false}if(i.markerLoad==="scroll"&&f.offsetTop>r){return false}if(i.hasInfoWindow){var t=null;t=new google.maps.InfoWindow({content:"",maxWidth:300})}for(var v=0,q=i.locations.length;v<q;v++){var y=i.locations[v],u=new google.maps.LatLng(y[2],y[3]),w;if(i.hasMarkerIcon){if(y[5]){i.markerIcon={url:y[5],scaledSize:new google.maps.Size(50,50)}}else{m(v);i.markerIcon="http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+i.markerIconLabel+"|"+i.markerIconHexBackground+"|"+i.markerIconHexColor}}w=new google.maps.Marker({position:u,map:e,icon:i.markerIcon,animation:i.markerAnimation,title:y[0],html:"<div><h1>"+y[0]+"</h1>"+y[1]+"</div>",zIndex:y[4]});s.push(w);if(i.hasLegend){var x=document.createElement("div");x.setAttribute("class","map__legend__item");x.innerHTML="<strong>"+i.markerIconLabel+'</strong>&nbsp;<a href="#">'+y[0]+"</a>";i.legend.appendChild(x)}if(i.hasInfoWindow){google.maps.event.addListener(w,"click",function(){t.setContent(this.html);t.open(e,this)})}}if(i.hasLegend){$("."+i.legendClass).on("click","a",function(A){A.preventDefault();var z=$(A.target).parent().index();google.maps.event.trigger(s[z],"click")})}i.markersAdded=true}}function k(){var q=document.createElement("a");q.setAttribute("class",i.printClass);q.setAttribute("href","#");q.innerHTML="Print";f.appendChild(q);i.print=a(f,i.printClass);i.print.onclick=function(){c();return false}}function n(r,q){return f.innerHTML=j(r,q)}function j(w,q){var u="",v="",s="",x="",r=i.locations.length,w=w||640,q=q||640;if(i.key){u="&amp;key="+i.key}if(i.styles[0].stylers[0].hue){v="%7Chue:0x"+i.styles[0].stylers[0].hue.substring(1,i.styles[0].stylers[0].hue.length)}if(i.styles[0].stylers[1].saturation){s="%7Csaturation:"+i.styles[0].stylers[1].saturation}for(var t=0;t<r;t++){x+="&amp;markers=label:"+m(t)+"%7C"+i.locations[t][2]+","+i.locations[t][3]}return'<a href="https://www.google.com/maps/@'+i.mapLat+","+i.mapLng+","+i.mapZoom+'z"><img style="-webkit-user-select: none" src="http://maps.googleapis.com/maps/api/staticmap?center='+i.mapLat+","+i.mapLng+"&amp;zoom="+i.mapZoom+u+"&amp;size="+w+"x"+q+"&amp;style=stylers"+v+s+x+'"></a>'}function m(q){switch(i.markerIconType){case"alpha":i.markerIconLabel=String.fromCharCode(97+q).toUpperCase();break;case"numeric":i.markerIconLabel=q+1;break}return i.markerIconLabel}function c(){var q=window.open("","mapWin","width=640,height=640");q.focus();q.document.write("<style>body { margin:0 } img { width: 100%; height: auto; }</style>"+j()+"<script>setTimeout(function () { window.focus(); window.print(); }, 1500);<\/script>");q.document.close();return q}function o(z,y){var B,s,q,r,w,x,v=arguments[0]||{},u=1,t=arguments.length,A=false;if(typeof v==="boolean"){A=v;v=arguments[1]||{};u=2}if(typeof v!=="object"&&!jQuery.isFunction(v)){v={}}if(t===u){v=this;--u}for(;u<t;u++){if((B=arguments[u])!=null){for(s in B){q=v[s];r=B[s];if(v===r){continue}if(A&&r&&(jQuery.isPlainObject(r)||(w=jQuery.isArray(r)))){if(w){w=false;x=q&&jQuery.isArray(q)?q:[]}else{x=q&&jQuery.isPlainObject(q)?q:{}}v[s]=jQuery.extend(A,x,r)}else{if(r!==undefined){v[s]=r}}}}}return v}function a(x,w){var v;for(var u=0,q=x.childNodes.length;u<q;u++){var t=(x.childNodes[u].className!=undefined)?x.childNodes[u].className.split(" "):[];for(var r=0,s=t.length;r<s;r++){if(t[r]==w){v=x.childNodes[u]}}}return v}return{addGoogleMapLegend:d,addGoogleMapMarkers:g,addGoogleMapStatic:n,addGoogleMapDynamic:l,generateGoogleMapStatic:j,addGoogleMapStyle:b,addGoogleMapPrintBtn:k,getGoogleMapMarkerLabel:m,printGoogleMap:c,extend:o,getChildByClass:a}};